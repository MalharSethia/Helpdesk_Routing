<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- Internal Helpdesk Team -->
        <record id="internal_helpdesk_team" model="helpdesk.ticket.team">
            <field name="name">Internal Support Team</field>
            <field name="active">True</field>
        </record>
        
        <!-- External Helpdesk Team -->
        <record id="external_helpdesk_team" model="helpdesk.ticket.team">
            <field name="name">External Support Team</field>
            <field name="active">True</field>
        </record>
        
        <!-- Email Template for Team Leader Notification -->
        <record id="ticket_assignment_email_template" model="mail.template">
            <field name="name">Helpdesk Ticket Assignment Notification</field>
            <field name="model_id" ref="helpdesk_mgmt.model_helpdesk_ticket"/>
            <field name="subject">New {{ 'Internal' if object.is_internal_ticket else 'External' }} Helpdesk Ticket: {{ object.name }}</field>
            <field name="email_to">{{ object.team_id.user_id.email }}</field>
            <field name="body_html"><![CDATA[
<div style="font-family: Arial, sans-serif; max-width: 600px;">
    <h2 style="color: #875A7B;">New Helpdesk Ticket Assigned</h2>
    
    <p>Hello {{ object.team_id.user_id.name }},</p>
    
    <p>A new <strong>{{ 'internal' if object.is_internal_ticket else 'external' }}</strong> helpdesk ticket has been assigned to your team.</p>
    
    <div style="background-color: #f8f9fa; padding: 15px; border-left: 4px solid #875A7B; margin: 20px 0;">
        <table style="width: 100%; border-collapse: collapse;">
            <tr>
                <td style="padding: 5px; font-weight: bold;">Ticket:</td>
                <td style="padding: 5px;">{{ object.name }}</td>
            </tr>
            <tr>
                <td style="padding: 5px; font-weight: bold;">Subject:</td>
                <td style="padding: 5px;">{{ object.subject or 'No subject' }}</td>
            </tr>
            <tr>
                <td style="padding: 5px; font-weight: bold;">Partner:</td>
                <td style="padding: 5px;">{{ object.partner_id.name or 'Unknown' }}</td>
            </tr>
            <tr>
                <td style="padding: 5px; font-weight: bold;">Email:</td>
                <td style="padding: 5px;">{{ object.partner_email or 'No email' }}</td>
            </tr>
            <tr>
                <td style="padding: 5px; font-weight: bold;">Domain:</td>
                <td style="padding: 5px;">{{ object.email_domain or 'No domain' }}</td>
            </tr>
            <tr>
                <td style="padding: 5px; font-weight: bold;">Team:</td>
                <td style="padding: 5px;">{{ object.team_id.name }}</td>
            </tr>
            <tr>
                <td style="padding: 5px; font-weight: bold;">Priority:</td>
                <td style="padding: 5px;">{{ dict(object._fields['priority'].selection)[object.priority] }}</td>
            </tr>
        </table>
    </div>
    
    <div style="text-align: center; margin: 30px 0;">
        <a href="{{ object.get_portal_url() }}" 
           style="background-color: #875A7B; color: white; padding: 12px 25px; text-decoration: none; border-radius: 5px; display: inline-block;">
            View Ticket
        </a>
    </div>
    
    <p>Best regards,<br/>
    Helpdesk System</p>
</div>
            ]]></field>
        </record>
        
    </data>
</odoo>
